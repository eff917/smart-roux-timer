(this["webpackJsonpxiaomi-mi-smart-rubik-cube"]=this["webpackJsonpxiaomi-mi-smart-rubik-cube"]||[]).push([[0],{11:function(e,t,n){e.exports=n(19)},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(8),c=n.n(i),o=(n(16),n(6)),u=n.n(o),f=n(9),s=n(2),v=n(10),b=n(3),d=n(4),l=(navigator,function(e){return e.getPrimaryService("0000aadb-0000-1000-8000-00805f9b34fb").then((function(e){return window.mservice=e,e.getCharacteristic("0000aadc-0000-1000-8000-00805f9b34fb").then((function(e){return window.mcharacteristic=e,e.startNotifications(),e}))}))}),w=function(e){return e&&e.gatt.connected?e.gatt.disconnect():Promise.resolve()},m=function(e,t,n,r,a,i,c,o){var u=0;return 1===t?(e[n]=o,e[r]=i,e[a]=c):2===t?(e[n]=c,e[r]=o,e[a]=i):3===t?(e[n]=i,e[r]=c,e[a]=o):u=1,u},g=function(e,t,n,r,a,i,c,o){var u=0;return 2===t?(e[n]=o,e[r]=i,e[a]=c):1===t?(e[n]=c,e[r]=o,e[a]=i):3===t?(e[n]=i,e[r]=c,e[a]=o):u=1,u},y=function(e,t,n,r,a,i){var c=0;return c|=1===t?m(e,n,r,a,i,1,2,3):2===t?m(e,n,r,a,i,1,3,4):3===t?m(e,n,r,a,i,1,4,5):4===t?m(e,n,r,a,i,1,5,2):5===t?m(e,n,r,a,i,6,3,2):6===t?m(e,n,r,a,i,6,4,3):7===t?m(e,n,r,a,i,6,5,4):8===t?m(e,n,r,a,i,6,2,5):2},h=function(e,t,n,r,a,i){var c=0;return c|=1===t?g(e,n,r,a,i,1,2,3):2===t?g(e,n,r,a,i,1,3,4):3===t?g(e,n,r,a,i,1,4,5):4===t?g(e,n,r,a,i,1,5,2):5===t?g(e,n,r,a,i,6,3,2):6===t?g(e,n,r,a,i,6,4,3):7===t?g(e,n,r,a,i,6,5,4):8===t?g(e,n,r,a,i,6,2,5):2},p=function(e,t,n,r,a,i){var c=0;return 1===t?(e[n]=a,e[r]=i):2===t?(e[n]=i,e[r]=a):c=3,c},x=function(e,t,n,r,a){var i=0;return 1===t?i|=p(e,n,r,a,1,2):2===t?i|=p(e,n,r,a,1,3):3===t?i|=p(e,n,r,a,1,4):4===t?i|=p(e,n,r,a,1,5):5===t?i|=p(e,n,r,a,2,3):6===t?i|=p(e,n,r,a,4,3):7===t?i|=p(e,n,r,a,4,5):8===t?i|=p(e,n,r,a,2,5):9===t?i|=p(e,n,r,a,6,2):10===t?i|=p(e,n,r,a,6,3):11===t?i|=p(e,n,r,a,6,4):12===t?i|=p(e,n,r,a,6,5):i=4,i},U=function(e,t,n,r,a){var i=e[a];e[a]=e[r],e[r]=e[n],e[n]=e[t],e[t]=i},k=function(e){var t=function(e){var t=new Uint8Array(55),n=0,r=new Uint8Array(8),a=new Uint8Array(8),i=new Uint8Array(12),c=new Uint8Array(12);if(20!==e.length){for(var o=0;o<55;o++)t[o]=0;return t}r[0]=e[0]>>4,r[1]=15&e[0],r[2]=e[1]>>4,r[3]=15&e[1],r[4]=e[2]>>4,r[5]=15&e[2],r[6]=e[3]>>4,r[7]=15&e[3],a[0]=e[4]>>4,a[1]=15&e[4],a[2]=e[5]>>4,a[3]=15&e[5],a[4]=e[6]>>4,a[5]=15&e[6],a[6]=e[7]>>4,a[7]=15&e[7],i[0]=e[8]>>4,i[1]=15&e[8],i[2]=e[9]>>4,i[3]=15&e[9],i[4]=e[10]>>4,i[5]=15&e[10],i[6]=e[11]>>4,i[7]=15&e[11],i[8]=e[12]>>4,i[9]=15&e[12],i[10]=e[13]>>4,i[11]=15&e[13];for(var u=0;u<12;u+=1)c[u]=0;if(0!==(128&e[14])?c[0]=2:c[0]=1,0!==(64&e[14])?c[1]=2:c[1]=1,0!==(32&e[14])?c[2]=2:c[2]=1,0!==(16&e[14])?c[3]=2:c[3]=1,0!==(8&e[14])?c[4]=2:c[4]=1,0!==(4&e[14])?c[5]=2:c[5]=1,0!==(2&e[14])?c[6]=2:c[6]=1,0!==(1&e[14])?c[7]=2:c[7]=1,0!==(128&e[15])?c[8]=2:c[8]=1,0!==(64&e[15])?c[9]=2:c[9]=1,0!==(32&e[15])?c[10]=2:c[10]=1,0!==(16&e[15])?c[11]=2:c[11]=1,t[32]=1,t[41]=2,t[50]=3,t[14]=4,t[23]=5,t[5]=6,n|=y(t,r[0],a[0],34,43,54),n|=h(t,r[1],a[1],36,52,18),n|=y(t,r[2],a[2],30,16,27),n|=h(t,r[3],a[3],28,25,45),n|=h(t,r[4],a[4],1,48,37),n|=y(t,r[5],a[5],3,12,46),n|=h(t,r[6],a[6],9,21,10),n|=y(t,r[7],a[7],7,39,19),n|=x(t,i[0],c[0],31,44),n|=x(t,i[1],c[1],35,53),n|=x(t,i[2],c[2],33,17),n|=x(t,i[3],c[3],29,26),n|=x(t,i[4],c[4],40,51),n|=x(t,i[5],c[5],15,49),n|=x(t,i[6],c[6],13,24),n|=x(t,i[7],c[7],42,22),n|=x(t,i[8],c[8],4,38),n|=x(t,i[9],c[9],2,47),n|=x(t,i[10],c[10],6,11),n|=x(t,i[11],c[11],8,20),U(t,1,7,9,3),U(t,4,8,6,2),U(t,37,19,10,46),U(t,38,20,11,47),U(t,39,21,12,48),U(t,40,22,13,49),U(t,41,23,14,50),U(t,42,24,15,51),U(t,43,25,16,52),U(t,44,26,17,53),U(t,45,27,18,54),U(t,34,28,30,36),U(t,31,29,33,35),0!==n)for(var f=0;f<55;f++)t[f]=0;return t}(function(e){var t=new Uint8Array(20),n=[80,175,152,32,170,119,19,137,218,230,63,95,46,130,106,175,163,243,20,7,167,21,168,232,143,175,42,125,126,57,254,87,217,91,85,215];if(20!==e.byteLength)return e;if(167!==e.getUint8(18))return e;var r=e.getUint8(19);r&=15;var a=e.getUint8(19);a>>=4;for(var i=0;i<19;i+=1){t[i]=e.getUint8(i);var c=t,o=i;c[o]=c[o]-n[r+i];var u=t,f=i;u[f]=u[f]-n[a+i]}return t}(e));return Array.from(t).slice(1)},A=(n(18),["g","y","r","w","o","b"]),E=function(e){Object(d.a)(n,e);var t=Object(b.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={cubeState:"bbbbbbbbboooooooooyyyyyyyyygggggggggrrrrrrrrrwwwwwwwww"},r.device=null,r}return Object(v.a)(n,[{key:"componentWillUnmount",value:function(){w(this.device)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("img",{alt:"Rubik cube",src:"http://cube.crider.co.uk/visualcube.php?fmt=svg&r=x-90y-120x-20&size=300&fc=".concat(this.state.cubeState)}),a.a.createElement("div",null,a.a.createElement("button",{onClick:Object(f.a)(u.a.mark((function t(){var n,r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["0000aadb-0000-1000-8000-00805f9b34fb"]}).then((function(e){return e.gatt.connect().then((function(t){return window.mdevice=e,window.mserver=t,{device:e,server:t}}))}));case 2:return n=t.sent,r=n.server,a=n.device,e.device=a,t.next=8,l(r);case 8:t.sent.addEventListener("characteristicvaluechanged",(function(t){var n=t.target.value,r=k(n).map((function(e){return A[e-1]})).join("");e.setState({cubeState:r}),console.log(r)})),a.addEventListener("gattserverdisconnected",(function(){w(a)}));case 11:case"end":return t.stop()}}),t)})))},"connect")))}}]),n}(a.a.Component),S=n(1),j=new S.f,C=new S.e(75,1,.1,1e3),O=["0x000000","0x009b48","0xffd500","0xb71234","0xffffff","0xff5800","0x0046ad"],z=new S.g;z.setSize(600,600),document.body.appendChild(z.domElement);for(var L=new S.a,N=0;N<L.faces.length;N++)L.faces[N].color.setHex(O[1+~~(N/2)]);var q=new S.d({color:16777215,vertexColors:S.b});L.colorsNeedUpdate=!0;var D=new S.c(L,q);j.add(D),C.position.z=5;!function e(){requestAnimationFrame(e),D.rotation.x+=.005,D.rotation.y+=.005,z.render(j,C)}(),c.a.render(a.a.createElement(E,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.e5967d0f.chunk.js.map
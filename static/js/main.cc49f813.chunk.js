(this["webpackJsonpxiaomi-mi-smart-rubik-cube"]=this["webpackJsonpxiaomi-mi-smart-rubik-cube"]||[]).push([[0],{12:function(e,n,t){e.exports=t(20)},17:function(e,n,t){},19:function(e,n,t){},20:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),o=t(8),c=t.n(o),i=(t(17),t(6)),u=t.n(i),s=t(9),v=t(2),f=t(10),d=t(3),l=t(4),b=(navigator,function(e){return e.getPrimaryService("0000aadb-0000-1000-8000-00805f9b34fb").then((function(e){return window.mservice=e,e.getCharacteristic("0000aadc-0000-1000-8000-00805f9b34fb").then((function(e){return window.mcharacteristic=e,e.startNotifications(),e}))}))}),g=function(e){return e&&e.gatt.connected?e.gatt.disconnect():Promise.resolve()},w=function(e,n,t,r,a,o,c,i){var u=0;return 1===n?(e[t]=i,e[r]=o,e[a]=c):2===n?(e[t]=c,e[r]=i,e[a]=o):3===n?(e[t]=o,e[r]=c,e[a]=i):u=1,u},m=function(e,n,t,r,a,o,c,i){var u=0;return 2===n?(e[t]=i,e[r]=o,e[a]=c):1===n?(e[t]=c,e[r]=i,e[a]=o):3===n?(e[t]=o,e[r]=c,e[a]=i):u=1,u},p=function(e,n,t,r,a,o){var c=0;return c|=1===n?w(e,t,r,a,o,1,2,3):2===n?w(e,t,r,a,o,1,3,4):3===n?w(e,t,r,a,o,1,4,5):4===n?w(e,t,r,a,o,1,5,2):5===n?w(e,t,r,a,o,6,3,2):6===n?w(e,t,r,a,o,6,4,3):7===n?w(e,t,r,a,o,6,5,4):8===n?w(e,t,r,a,o,6,2,5):2},h=function(e,n,t,r,a,o){var c=0;return c|=1===n?m(e,t,r,a,o,1,2,3):2===n?m(e,t,r,a,o,1,3,4):3===n?m(e,t,r,a,o,1,4,5):4===n?m(e,t,r,a,o,1,5,2):5===n?m(e,t,r,a,o,6,3,2):6===n?m(e,t,r,a,o,6,4,3):7===n?m(e,t,r,a,o,6,5,4):8===n?m(e,t,r,a,o,6,2,5):2},y=function(e,n,t,r,a,o){var c=0;return 1===n?(e[t]=a,e[r]=o):2===n?(e[t]=o,e[r]=a):c=3,c},x=function(e,n,t,r,a){var o=0;return 1===n?o|=y(e,t,r,a,1,2):2===n?o|=y(e,t,r,a,1,3):3===n?o|=y(e,t,r,a,1,4):4===n?o|=y(e,t,r,a,1,5):5===n?o|=y(e,t,r,a,2,3):6===n?o|=y(e,t,r,a,4,3):7===n?o|=y(e,t,r,a,4,5):8===n?o|=y(e,t,r,a,2,5):9===n?o|=y(e,t,r,a,6,2):10===n?o|=y(e,t,r,a,6,3):11===n?o|=y(e,t,r,a,6,4):12===n?o|=y(e,t,r,a,6,5):o=4,o},k=function(e,n,t,r,a){var o=e[a];e[a]=e[r],e[r]=e[t],e[t]=e[n],e[n]=o},E=function(e){var n=function(e){var n=new Uint8Array(55),t=0,r=new Uint8Array(8),a=new Uint8Array(8),o=new Uint8Array(12),c=new Uint8Array(12);if(20!==e.length){for(var i=0;i<55;i++)n[i]=0;return n}r[0]=e[0]>>4,r[1]=15&e[0],r[2]=e[1]>>4,r[3]=15&e[1],r[4]=e[2]>>4,r[5]=15&e[2],r[6]=e[3]>>4,r[7]=15&e[3],a[0]=e[4]>>4,a[1]=15&e[4],a[2]=e[5]>>4,a[3]=15&e[5],a[4]=e[6]>>4,a[5]=15&e[6],a[6]=e[7]>>4,a[7]=15&e[7],o[0]=e[8]>>4,o[1]=15&e[8],o[2]=e[9]>>4,o[3]=15&e[9],o[4]=e[10]>>4,o[5]=15&e[10],o[6]=e[11]>>4,o[7]=15&e[11],o[8]=e[12]>>4,o[9]=15&e[12],o[10]=e[13]>>4,o[11]=15&e[13];for(var u=0;u<12;u+=1)c[u]=0;if(0!==(128&e[14])?c[0]=2:c[0]=1,0!==(64&e[14])?c[1]=2:c[1]=1,0!==(32&e[14])?c[2]=2:c[2]=1,0!==(16&e[14])?c[3]=2:c[3]=1,0!==(8&e[14])?c[4]=2:c[4]=1,0!==(4&e[14])?c[5]=2:c[5]=1,0!==(2&e[14])?c[6]=2:c[6]=1,0!==(1&e[14])?c[7]=2:c[7]=1,0!==(128&e[15])?c[8]=2:c[8]=1,0!==(64&e[15])?c[9]=2:c[9]=1,0!==(32&e[15])?c[10]=2:c[10]=1,0!==(16&e[15])?c[11]=2:c[11]=1,n[32]=1,n[41]=2,n[50]=3,n[14]=4,n[23]=5,n[5]=6,t|=p(n,r[0],a[0],34,43,54),t|=h(n,r[1],a[1],36,52,18),t|=p(n,r[2],a[2],30,16,27),t|=h(n,r[3],a[3],28,25,45),t|=h(n,r[4],a[4],1,48,37),t|=p(n,r[5],a[5],3,12,46),t|=h(n,r[6],a[6],9,21,10),t|=p(n,r[7],a[7],7,39,19),t|=x(n,o[0],c[0],31,44),t|=x(n,o[1],c[1],35,53),t|=x(n,o[2],c[2],33,17),t|=x(n,o[3],c[3],29,26),t|=x(n,o[4],c[4],40,51),t|=x(n,o[5],c[5],15,49),t|=x(n,o[6],c[6],13,24),t|=x(n,o[7],c[7],42,22),t|=x(n,o[8],c[8],4,38),t|=x(n,o[9],c[9],2,47),t|=x(n,o[10],c[10],6,11),t|=x(n,o[11],c[11],8,20),k(n,1,7,9,3),k(n,4,8,6,2),k(n,37,19,10,46),k(n,38,20,11,47),k(n,39,21,12,48),k(n,40,22,13,49),k(n,41,23,14,50),k(n,42,24,15,51),k(n,43,25,16,52),k(n,44,26,17,53),k(n,45,27,18,54),k(n,34,28,30,36),k(n,31,29,33,35),0!==t)for(var s=0;s<55;s++)n[s]=0;return n}(function(e){var n=new Uint8Array(20),t=[80,175,152,32,170,119,19,137,218,230,63,95,46,130,106,175,163,243,20,7,167,21,168,232,143,175,42,125,126,57,254,87,217,91,85,215];if(20!==e.byteLength)return e;if(167!==e.getUint8(18))return e;var r=e.getUint8(19);r&=15;var a=e.getUint8(19);a>>=4;for(var o=0;o<19;o+=1){n[o]=e.getUint8(o);var c=n,i=o;c[i]=c[i]-t[r+o];var u=n,s=o;u[s]=u[s]-t[a+o]}return n}(e));return Array.from(n).slice(1)},U=(t(19),t(0)),A=t(11),j=new U.p;j.setSize(600,600),document.body.appendChild(j.domElement);var S=new U.k,O=new U.h(75,1,.1,1e3);O.position.set(0,0,30),new U.b(1,1e3,256,{format:U.j,magFilter:U.d,minFilter:U.d}).renderTarget.texture.encoding=U.q;var C=new A.a(O,j.domElement);C.addEventListener("change",J),C.minDistance=5,C.maxDistance=30,C.enablePan=!1;var D=[0,39752,16766208,11997748,16777215,16734208,18093],G=[new U.g({color:D[5]}),new U.g({color:D[3]}),new U.g({color:D[1]}),new U.g({color:D[6]}),new U.g({color:D[4]}),new U.g({color:D[2]})],L=new U.a(3,3,3,3,3,3),z=[6,1,6,1,6,1,6,1,6,5,3,5,3,5,3,5,3,5,2,4,2,4,2,4,2,4,2,1,6,1,6,1,6,1,6,1,3,5,3,5,3,5,3,5,3,4,2,4,2,4,2,4,2,4];L.clearGroups();for(var P=0;P<L.index.count;P+=6)L.addGroup(P,6,z[P/6]-1);function q(e){L.clearGroups();for(var n=0;n<L.index.count;n+=6)L.addGroup(n,6,e[n/6]-1)}var F=new U.f(L,G);function J(){j.render(S,O)}console.log(F),S.add(F),O.position.z=5;var N=["g","y","r","w","o","b"],B=function(e){Object(l.a)(t,e);var n=Object(d.a)(t);function t(e){var r;return Object(v.a)(this,t),(r=n.call(this,e)).state={cubeState:"bbbbbbbbboooooooooyyyyyyyyygggggggggrrrrrrrrrwwwwwwwww"},r.device=null,r}return Object(f.a)(t,[{key:"componentWillUnmount",value:function(){g(this.device)}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"App"},a.a.createElement("img",{alt:"Rubik cube",src:"http://cube.crider.co.uk/visualcube.php?fmt=svg&r=x-90y-120x-20&size=300&fc=".concat(this.state.cubeState)}),a.a.createElement("div",null,a.a.createElement("button",{onClick:Object(s.a)(u.a.mark((function n(){var t,r,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["0000aadb-0000-1000-8000-00805f9b34fb"]}).then((function(e){return e.gatt.connect().then((function(n){return window.mdevice=e,window.mserver=n,{device:e,server:n}}))}));case 2:return t=n.sent,r=t.server,a=t.device,e.device=a,n.next=8,b(r);case 8:n.sent.addEventListener("characteristicvaluechanged",(function(n){var t=n.target.value,r=E(t);console.log(r),q(r),J();var a=E(t).map((function(e){return N[e-1]})).join("");e.setState({cubeState:a}),console.log(a)})),a.addEventListener("gattserverdisconnected",(function(){g(a)}));case 11:case"end":return n.stop()}}),n)})))},"connect")))}}]),t}(a.a.Component);c.a.render(a.a.createElement(B,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.cc49f813.chunk.js.map